tosca_definitions_version: tosca_simple_yaml_1_0_0
metadata:
  template_name: dcaegen2.collectors.datafile.datafile-app-server
imports:
- schema: schema.yaml
topology_template:
  inputs:
    topic0_aaf_password:
      type: string
    topic0_aaf_username:
      type: string
    topic0_client_role:
      type: string
  node_templates:
    dcaegen2.collectors.datafile.datafile-app-server:
      type: tosca.dcae.nodes.dockerApp.dcaegen2.collectors.datafile.datafile-app-server
      properties:
        buscontroller_feed_publishing_endpoint: http://dmaap-bc.onap.svc.cluster.local:8080/webapi/feeds
        datafile.policy: ''
        dmaap.dmaapConsumerConfiguration.consumerGroup: OpenDcae-c12
        dmaap.dmaapConsumerConfiguration.consumerId: C12
        dmaap.dmaapConsumerConfiguration.dmaapContentType: application/json
        dmaap.dmaapConsumerConfiguration.dmaapHostName: localhost
        dmaap.dmaapConsumerConfiguration.dmaapPortNumber: '2222'
        dmaap.dmaapConsumerConfiguration.dmaapProtocol: http
        dmaap.dmaapConsumerConfiguration.dmaapTopicName: /events/unauthenticated.VES_NOTIFICATION_OUTPUT
        dmaap.dmaapConsumerConfiguration.messageLimit: '1'
        dmaap.dmaapConsumerConfiguration.timeoutMs: '-1'
        dmaap.dmaapProducerConfiguration.dmaapContentType: application/octet-stream
        dmaap.dmaapProducerConfiguration.dmaapHostName: localhost
        dmaap.dmaapProducerConfiguration.dmaapPortNumber: '3907'
        dmaap.dmaapProducerConfiguration.dmaapProtocol: https
        dmaap.dmaapProducerConfiguration.dmaapTopicName: publish
        dmaap.dmaapProducerConfiguration.dmaapUserName: dradmin
        dmaap.dmaapProducerConfiguration.dmaapUserPassword: dradmin
        dmaap_dr_feed_id: bulk_pm_feed
        ftp.ftpesConfiguration.keyCert: config/dfc.jks
        ftp.ftpesConfiguration.keyPassword: secret
        ftp.ftpesConfiguration.trustedCA: config/ftp.jks
        ftp.ftpesConfiguration.trustedCAPassword: secret
        location_id:
          get_property:
          - SELF
          - composition
          - location_id
        security.enableDmaapCertAuth: 'False'
        security.keyStorePasswordPath: /opt/app/datafile/etc/cert/key.pass
        security.keyStorePath: /opt/app/datafile/etc/cert/key.p12
        security.trustStorePasswordPath: /opt/app/datafile/etc/cert/trust.pass
        security.trustStorePath: /opt/app/datafile/etc/cert/trust.jks
        service_name: datafile
        streams_consumer.datafile_consume_mr.message_router_topic: /events/unauthenticated.VES_NOTIFICATION_OUTPUT
      requirements:
      - stream_subscribe_0: topic0
      - stream_publish_0: feed1
      - policy: policy_0
    feed1:
      type: tosca.dcae.nodes.dmaap.feed
      properties:
        feed_name: ''
        location:
          get_property:
          - SELF
          - composition
          - location_id
        node_name: __GET_NODE_NAME__
      capabilities:
        feed:
          properties:
            feed_name:
              get_property:
              - SELF
              - feed_name
            location:
              get_property:
              - SELF
              - location
            node_name:
              get_property:
              - SELF
              - node_name
    policy_0:
      type: tosca.dcae.nodes.policy
      properties:
        policy_name: policy.nodes.dcaegen2.collectors.datafile.datafile-app-server
    topic0:
      type: tosca.dcae.nodes.dmaap.topic
      properties:
        aaf_password:
          get_input: topic0_aaf_password
        aaf_username:
          get_input: topic0_aaf_username
        client_role:
          get_input: topic0_client_role
        location:
          get_property:
          - SELF
          - composition
          - location_id
        node_name: __GET_NODE_NAME__
        topic_name: ''
      capabilities:
        topic:
          properties:
            aaf_password:
              get_property:
              - SELF
              - aaf_password
            aaf_username:
              get_property:
              - SELF
              - aaf_username
            client_role:
              get_property:
              - SELF
              - client_role
            location:
              get_property:
              - SELF
              - location
            node_name:
              get_property:
              - SELF
              - node_name
            topic_name:
              get_property:
              - SELF
              - topic_name
